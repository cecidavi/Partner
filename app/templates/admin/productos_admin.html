<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gesti√≥n de Productos - Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
    <style>
        img.product-img {
            width: 60px;
            height: auto;
            border-radius: 4px;
        }
        .btn-edit, .btn-delete {
            margin-right: 5px;
        }
        .form-inline {
            display: inline;
        }
    </style>
</head>
<body>
<div class="admin-container">
    <header class="admin-header">
        <h1>Gesti√≥n de Productos</h1>
        <nav>
            <a href="{{ url_for('admin.admin_home') }}">‚¨Ö Volver al panel</a>
            <a href="{{ url_for('auth.logout') }}">üîí Cerrar Sesi√≥n</a>
        </nav>
    </header>

    <main class="admin-main">
        <section>
            <h2>Agregar Producto</h2>
            <form method="POST">
                {{ form.hidden_tag() }}
                <p>{{ form.nombre.label }}<br>{{ form.nombre(size=40) }}</p>
                <p>{{ form.descripcion.label }}<br>{{ form.descripcion(size=40) }}</p>
                <p>{{ form.imagen_url.label }}<br>{{ form.imagen_url(size=40) }}</p>
                <p>{{ form.precio.label }}<br>{{ form.precio(step="0.01") }}</p>
                <p>{{ form.estatus.label }}<br>{{ form.estatus() }}</p>
                <p>{{ form.submit(class_="btn btn-success") }}</p>
            </form>
        </section>

        <hr>

        <section>
            <h2>Lista de Productos</h2>
            <table border="1" cellpadding="10">
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Descripci√≥n</th>
                    <th>Precio</th>
                    <th>Estatus</th>
                    <th>Imagen</th>
                    <th>Acciones</th>
                </tr>
                {% for p in productos %}
                <tr>
                    <td>{{ p.id }}</td>
                    <td>{{ p.nombre }}</td>
                    <td>{{ p.descripcion }}</td>
                    <td>${{ "%.2f"|format(p.precio) }}</td>
                    <td>{{ p.estatus }}</td>
                    <td>
                        {% if p.imagen_url %}
                            <img src="{{ p.imagen_url }}" alt="Imagen" class="product-img">
                        {% else %}
                            Sin imagen
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ url_for('admin.editar_producto', producto_id=p.id) }}" class="btn-edit">‚úèÔ∏è</a>
                        <form action="{{ url_for('admin.eliminar_producto', producto_id=p.id) }}" method="POST" class="form-inline" onsubmit="return confirm('¬øSeguro que deseas eliminar este producto?');">
                            <button type="submit" class="btn-delete">üóëÔ∏è</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </table>
        </section>
    </main>
</div>
</body>
</html>
